<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'common_head.html' %}
</head>
<body>
    <div class="container">
        <div class="header">
               {% include 'common_title.html' %}
                <ul class="navbar-nav">
                    <li class="nav-item active">
                      <a class="nav-item nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-item nav-link" href="addJobs">Orders</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-item nav-link" href="showSignUp">Add User</a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-item nav-link" href="stats">SystemStats</a>
                    </li>
                    {% if not googleSession %}
                     {% include 'no_login.html' %}
                    {% else %}
                     {% include 'google_login.html' %}
                    {% endif %}
                </ul>
                <!-- closing from the title temlate -->
            </nav>
        </div>

        <div class="jumbotron">
            <h1>Coffee Bucket List</h1>
            <hr class="my-3">
            {% include 'common_alerts.html' %}
            <p> To browse the actual status, more statistics or place an order login is required!
            </p>
            <ul>
              <li>Last order placed on <b> {{generalStats['lastDate']}} by {{generalStats['lastServant']}}</b></li>
              <li>Total number of <b>{{generalStats['totalServings']}} shared orders </b> with a total <b>number of {{generalStats['totalJobs']}} servings</b> for a total amount of <b> {{'%0.1f'| format(generalStats['totalBudgetSpent'])}} CHF </b></li>
            </ul>
            {% include 'quick_add.html' %}

            {% if googleSession and loggedUsernameEmail['idProduct'] == -1 %}
            <button id='addQuick' class="btn btn-lg btn-primary btn-block"
              type="button" disabled> You will see here your favorite option after first order
              <img src="{{loggedUsernameEmail['picture']}}" width=25 height=25 class="img-circle"  />
            </button>
            {% endif %}

            <hr class="my-3">
            <div class="row">
            <div class="col">
              <h4>  Next candidates (all population):</h4>
              <div class="table-responsive table-borderless alert alert-danger" role="alert">
                  <table class="table table-striped table-hover table-sm">
                      <thead>
                          <tr>
                              <th scope="col">Name</th>
                              <th scope="col" class="text-right">Global <br>rating</th>
                          </tr>
                      </thead>
                      <tbody>
                      {% for topper in candidates %}
                          <tr>
                              <th scope="row">{{ topper[1] }}
                                {%for badge in assignedBadges %}
                                  {%if  badge[0] == topper[0] %}
                                    <img src="{{ badge[5] }}"
                                    width="25" height="25" title="{{ badge[4] }}({{ badge[1] }})"/>
                                  {% endif %}
                                {% endfor %}
                              </th>
                              <td class="text-right"> {{'%d'| format(topper[2]|float)}}</td>
                          </tr>
                      {% endfor %}
                      </tbody>
                  </table>
              </div>
            </div>

            <div class="col">
              <h4> Top servants: </h4>
              <div class="table-responsive table-borderless alert alert-dark" role="alert">
                  <table class="table table-striped table-hover table-sm ">
                      <thead>
                          <tr>
                              <th scope="col">Name</th>
                              <th scope="col" class="text-right">Served</th>
                              <th scope="col" class="text-right">Spent <br>[CHF]</th>
                              <th scope="col" class="text-right">Global <br> rating</th>
                          </tr>
                      </thead>
                      <tbody>
                      {% for topper in top3 %}
                          <tr id={{ topper[0] }}>
                              <th scope="row">{{ topper[0] }}

                              </th>
                              <td class="text-right"> {{'%d'| format(topper[1]|float)}} </td>
                              <td class="text-right"> {{'%0.1f'| format(topper[2]|float)}} </td>
                              <td class="text-right"> {{'%d'| format(topper[3]|float)}}</td>
                          </tr>
                      {% endfor %}
                      </tbody>
                  </table>
              </div>
            </div>
          </div>
          <p><a class="btn btn-lg btn-success btn-block" href="addJobs#addorder" role="button">Prepare the order</a></p>
          </div>
        <hr class="my-3">
        {% include 'game_desc.html' %}
        <footer class="footer">
        {% include 'footer.html' %}
        </footer>

    </div>
</body>
</html>
