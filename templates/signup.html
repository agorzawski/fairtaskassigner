<!DOCTYPE html>
<html lang="en">
  <head>
    {% include 'common_head.html' %}
  </head>
  <body>
    <div class="container">
      <div class="header">
          <nav>
              <ul class="nav nav-pills pull-right">
                  <li role="presentation" ><a href="main">Home</a>
                  </li>
                  <li role="presentation"><a href="addJobs">Orders</a>
                  </li>
                  <li role="presentation" class="active"><a href="showSignUp">Settings</a>
                  </li>
                  {% include 'google_login.html' %}
              </ul>
          </nav>
          {% include 'common_title.html' %}
      </div>

      <div class="jumbotron">
        <h1>Add buddy</h1>
        <form class="form-signin">
        <label for="inputName" class="sr-only">Name</label>
        <input type="name" name="inputName" id="inputName"
          class="form-control" placeholder="What name to use" required autofocus>
          {%if loggedUsernameEmail['id'] == invalidId %}
          <select type="name" name="assignedNameId" id="assignedNameId" class="form-control" required autofocus>
            <option value=-1>"Or to whom assign this email..."</option>
              {% for username in notValidatedUsers %}
              <option value={{username[0]}}>{{username[2]}} ({{username[1]}})</option>
              {% endfor %}
          </select>
          {% endif %}
        <br>
        <label for="inputEmail" class="sr-only">Email address</label>
            {%if loggedUsernameEmail['id'] != invalidId %}
              <input type="email" name="inputEmail" id="inputEmail"
                class="form-control" placeholder= "Email address" required autofocus>
            {% else %}
              <input type="email" name="inputEmail" id="inputEmail" readonly
                class="form-control" value="{{loggedUsernameEmail['email']}}" required autofocus>
            {% endif %}
        <br><br>
        <button id="btnSignUp" class="btn btn-lg btn-success btn-block" type="button">Sign up</button>
        <script>
          $(function() {
              $('#btnSignUp').click(function() {
                  $.ajax({
                      url: '/signUp',
                      data: $('form').serialize(),
                      type: 'POST',
                      success: function(response) {
                          location.reload();
                          console.log(response);
                      },
                      error: function(error) {
                          console.log(error);
                      }
                  });
              });
            }
          );
        </script>
      </form>
      </div>

      <div class="row marketing">
          <div class="col-lg-6">
              <h4>Users: </h4>
              <div class="table-responsive">
                  <table class="table">
                      <thead>
                          <tr>
                              <th scope="col">Id</th>
                              <th scope="col">Name</th>
                              <th scope="col">Email </th>
                              <th scope="col">Actual Score </th>
                          </tr>
                      </thead>
                      <tbody>
                      {% for user in users %}
                          <tr >
                              <th scope="row">{{ user[0] }}</th>
                              <td> {{ user[2] }} </td>
                              <td> {{ user[1] }} </td>
                              <td> {{'%0.1f'| format(user[3]|float)}}</td>
                          </tr>
                      {% endfor %}
                      </tbody>
                  </table>
              </div>
          </div>

          <div class="col-lg-6">
              <h4>Products: </h4>
              <div class="table-responsive">
                  <table class="table">
                      <thead>
                          <tr>
                              <th scope="col">Id</th>
                              <th scope="col">Name</th>
                              <th scope="col">Price </th>
                          </tr>
                      </thead>
                      <tbody>
                      {% for user in products %}
                          <tr >
                              <th scope="row">{{ user[0] }}</th>
                              <td> {{ user[1] }} </td>
                              <td> {{'%0.1f'| format(user[2]|float)}}</td>
                          </tr>
                      {% endfor %}
                      </tbody>
                  </table>
              </div>
          </div>
      </div>

      <footer class="footer">
      {% include 'footer.html' %}
      </footer>

    </div>
  </body>
</html>
